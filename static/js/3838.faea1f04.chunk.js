"use strict";(self.webpackChunkmaptest=self.webpackChunkmaptest||[]).push([[3838],{13838:function(e,t,r){r.r(t),r.d(t,{default:function(){return U}});var n,i=r(37762),l=r(74165),o=r(15861),a=r(93433),s=r(1413),u=r(15671),y=r(43144),f=r(11752),p=r(61120),c=r(60136),v=r(29388),d=r(27366),h=(r(59486),r(40281)),b=r(77178),m=r(92026),g=r(97642),S=r(66978),k=r(94172),C=r(35995),Z=r(49861),_=r(25243),w=(r(63780),r(38511)),x=r(69912),E=r(31201),P=r(78952),I=r(30651),G=r(6693),O=r(6061),L=r(29598),F=r(71684),M=r(56811),j=r(45948),T=r(97326),N=r(91505),R=r(46784),J=r(54472),Y=r(643),A=r(21857),K=r(53866),z=n=function(e){(0,c.Z)(r,e);var t=(0,v.Z)(r);function r(){var e;(0,u.Z)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).description=null,e.id=null,e.networkLink=null,e.sublayers=null,e.title=null,e.sourceJSON=null,e.fullExtent=null,e.addHandles([(0,k.on)((function(){return e.sublayers}),"after-add",(function(t){var r=t.item;r.parent=(0,T.Z)(e),r.layer=e.layer}),k.Z_),(0,k.on)((function(){return e.sublayers}),"after-remove",(function(e){var t=e.item;t.layer=t.parent=null}),k.Z_),(0,k.YP)((function(){return e.sublayers}),(function(t,r){if(r){var n,l=(0,i.Z)(r);try{for(l.s();!(n=l.n()).done;){var o=n.value;o.layer=o.parent=null}}catch(y){l.e(y)}finally{l.f()}}if(t){var a,s=(0,i.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.parent=(0,T.Z)(e),u.layer=e.layer}}catch(y){s.e(y)}finally{s.f()}}}),k.Z_)]),e}return(0,y.Z)(r,[{key:"initialize",value:function(){var e=this;(0,k.N1)((function(){return e.networkLink})).then((function(){return(0,k.N1)((function(){return!0===e.visible}))})).then((function(){return e.load()}))}},{key:"load",value:function(e){var t,r,i=this;if(this.networkLink&&!this.networkLink.viewFormat){var l=(0,m.pC)(e)?e.signal:null,o=this._fetchService(null!==(t=null===(r=this._get("networkLink"))||void 0===r?void 0:r.href)&&void 0!==t?t:"",l).then((function(e){var t,r=(0,A.lm)(e.sublayers);i.fullExtent=K.Z.fromJSON(r),i.sourceJSON=e;var l=(0,_.se)(h.Z.ofType(n),(0,A.j5)(n,e));i.sublayers?i.sublayers.addMany(l):i.sublayers=l,null!==(t=i.layer)&&void 0!==t&&t.emit("sublayer-update"),i.layer&&i.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(o),Promise.resolve(this)}}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"_fetchService",value:function(e,t){return(0,A.CS)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return(0,A.Cw)(e.data)}))}}]),r}(N.Z.EventedMixin((0,R.eC)(J.Z)));(0,d._)([(0,Z.Cb)()],z.prototype,"description",void 0),(0,d._)([(0,Z.Cb)()],z.prototype,"id",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0,value:null})],z.prototype,"networkLink",void 0),(0,d._)([(0,Z.Cb)({json:{write:{allowNull:!0}}})],z.prototype,"parent",void 0),(0,d._)([(0,Z.Cb)({type:h.Z.ofType(n),json:{write:{allowNull:!0}}})],z.prototype,"sublayers",void 0),(0,d._)([(0,Z.Cb)({value:null,json:{read:{source:"name",reader:function(e){return(0,Y.Cb)(e)}}}})],z.prototype,"title",void 0),(0,d._)([(0,Z.Cb)({value:!0})],z.prototype,"visible",null),(0,d._)([(0,w.r)("visible",["visibility"])],z.prototype,"readVisible",null),(0,d._)([(0,Z.Cb)()],z.prototype,"sourceJSON",void 0),(0,d._)([(0,Z.Cb)({value:null})],z.prototype,"layer",null),(0,d._)([(0,Z.Cb)({type:K.Z})],z.prototype,"fullExtent",void 0);var W=z=n=(0,d._)([(0,x.j)("esri.layers.support.KMLSublayer")],z),D=["kml","xml"],H=function(e){(0,c.Z)(r,e);var t=(0,v.Z)(r);function r(){var e;(0,u.Z)(this,r);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i)))._visibleFolders=[],e.allSublayers=new b.Z({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=P.Z.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return(0,y.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,k.YP)((function(){return e.sublayers}),(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),k.Z_),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))])}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,s.Z)({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return(0,A.j5)(W,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,t){for(var r=[],n=e.toArray();n.length;){var i=n[0];i.networkLink||(i.visible&&r.push(i.id),i.sublayers&&n.push.apply(n,(0,a.Z)(i.sublayers.toArray()))),n.shift()}t.visibleFolders=r}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,C.vt)(this.url,D)||"KML":e||""},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[];return e&&e.forEach((function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))})),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=(0,m.pC)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"],supportsData:!1},e).catch(S.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"destroy",value:function(){(0,f.Z)((0,p.Z)(r.prototype),"destroy",this).call(this),this.allSublayers.destroy()}},{key:"_fetchService",value:function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var r,n,i=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){var e;return i.resourceInfo?{ssl:!1,data:i.resourceInfo}:(0,A.CS)(null!==(e=i.url)&&void 0!==e?e:"",i.outSpatialReference,i.refreshInterval,t)}));case 2:r=e.sent,(n=(0,A.Cw)(r.data))&&this.read(n,{origin:"service"});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_recomputeFullExtent",value:function(){var e=null;(0,m.pC)(this.extent)&&(e=this.extent.clone());return function t(r){if(r.sublayers){var n,l=(0,i.Z)(r.sublayers.items);try{for(l.s();!(n=l.n()).done;){var o=n.value;t(o),o.visible&&o.fullExtent&&((0,m.pC)(e)?e.union(o.fullExtent):e=o.fullExtent.clone())}}catch(a){l.e(a)}finally{l.f()}}}(this),e}}]),r}((0,G.h)((0,F.Q)((0,M.M)((0,O.q)((0,L.I)((0,g.R)(I.Z)))))));(0,d._)([(0,Z.Cb)({readOnly:!0})],H.prototype,"allSublayers",void 0),(0,d._)([(0,Z.Cb)({type:P.Z})],H.prototype,"outSpatialReference",void 0),(0,d._)([(0,Z.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],H.prototype,"path",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{read:!1,write:!1}})],H.prototype,"legendEnabled",void 0),(0,d._)([(0,Z.Cb)({type:["show","hide","hide-children"]})],H.prototype,"listMode",void 0),(0,d._)([(0,Z.Cb)({type:["KML"]})],H.prototype,"operationalLayerType",void 0),(0,d._)([(0,Z.Cb)({})],H.prototype,"resourceInfo",void 0),(0,d._)([(0,Z.Cb)({type:h.Z.ofType(W),json:{write:{ignoreOrigin:!0}}})],H.prototype,"sublayers",void 0),(0,d._)([(0,w.r)(["web-map","portal-item"],"sublayers",["visibleFolders"])],H.prototype,"readSublayersFromItemOrWebMap",null),(0,d._)([(0,w.r)("service","sublayers",["sublayers"])],H.prototype,"readSublayers",null),(0,d._)([(0,E.c)("sublayers")],H.prototype,"writeSublayers",null),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{read:!1}})],H.prototype,"type",void 0),(0,d._)([(0,Z.Cb)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],H.prototype,"title",null),(0,d._)([(0,Z.Cb)(j.HQ)],H.prototype,"url",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],H.prototype,"visibleSublayers",null),(0,d._)([(0,Z.Cb)({type:K.Z})],H.prototype,"extent",void 0),(0,d._)([(0,Z.Cb)()],H.prototype,"fullExtent",null);var U=H=(0,d._)([(0,x.j)("esri.layers.KMLLayer")],H)},21857:function(e,t,r){r.d(t,{CS:function(){return g},Cw:function(){return m},Yu:function(){return C},j5:function(){return S},lm:function(){return _}});var n=r(74165),i=r(15861),l=r(37762),o=r(42265),a=r(19545),s=r(44055),u=r(76200),y=r(84652),f=r(35995),p=r(78952),c=r(41414),v=r(376),d=r(9014),h=r(49818),b={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function m(e){var t=e.folders||[],r=t.slice(),n=new Map,i=new Map,o=new Map,a=new Map,s=new Map,u={esriGeometryPoint:i,esriGeometryPolyline:o,esriGeometryPolygon:a};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var t=(0,y.d9)(e);t.featureSet.features=[];var r=e.featureSet.geometryType;n.set(r,t);var l=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?k(i,l,e.featureSet.features):"esriGeometryPolyline"===r?k(o,l,e.featureSet.features):"esriGeometryPolygon"===r&&k(a,l,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){s.set(e.id,e)})),t.forEach((function(t){t.networkLinkIds.forEach((function(n){var i=function(e,t,r){var n=function(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(n,t.id,e.networkLinks);i&&r.push(i)}))})),r.forEach((function(e){if(e.featureInfos){e.points=(0,y.d9)(n.get("esriGeometryPoint")),e.polylines=(0,y.d9)(n.get("esriGeometryPolyline")),e.polygons=(0,y.d9)(n.get("esriGeometryPolygon")),e.mapImages=[];var t,r=(0,l.Z)(e.featureInfos);try{for(r.s();!(t=r.n()).done;){var i=t.value;switch(i.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var o=u[i.type].get(i.id);o&&e[b[i.type]].featureSet.features.push(o);break;case"GroundOverlay":var a=s.get(i.id);a&&e.mapImages.push(a)}}}catch(f){r.e(f)}finally{r.f()}e.fullExtent=_([e])}}));var f=_(r);return{folders:t,sublayers:r,extent:f}}function g(e,t,r,n){var i=a.id&&a.id.findCredential(e);e=(0,f.fl)(e,{token:i&&i.token});var l=o.Z.kmlServiceUrl;return(0,u.default)(l,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function S(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=[],l={},o=t.sublayers,a=t.folders.map((function(e){return e.id}));return o.forEach((function(t){var o=new e;if(r?o.read(t,r):o.read(t),n.length&&a.includes(o.id)&&(o.visible=n.includes(o.id)),l[t.id]=o,null!=t.parentFolderId&&-1!==t.parentFolderId){var s,u=l[t.parentFolderId];u.sublayers||(u.sublayers=[]),null===(s=u.sublayers)||void 0===s||s.unshift(o)}else i.unshift(o)})),i}function k(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function C(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,o,a,u,y,f,p,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.Z.fromJSON(t.featureSet).features,i=t.layerDefinition,o=(0,d.i)(i.drawingInfo.renderer),a=s.Z.fromJSON(t.popupInfo),u=[],y=(0,l.Z)(r),e.prev=2,y.s();case 4:if((f=y.n()).done){e.next=12;break}return p=f.value,e.next=8,o.getSymbolAsync(p);case 8:c=e.sent,p.symbol=c,p.popupTemplate=a,p.visible=!0,u.push(p);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),y.e(e.t0);case 17:return e.prev=17,y.f(),e.finish(17);case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function _(e){var t,r=(0,c.Ue)(c.Gv),n=(0,c.Ue)(c.Gv),i=(0,l.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.polygons&&o.polygons.featureSet&&o.polygons.featureSet.features){var a,s=(0,l.Z)(o.polygons.featureSet.features);try{for(s.s();!(a=s.n()).done;){var u=a.value;(0,v.Yg)(r,u.geometry),(0,c.TC)(n,r)}}catch(C){s.e(C)}finally{s.f()}}if(o.polylines&&o.polylines.featureSet&&o.polylines.featureSet.features){var y,f=(0,l.Z)(o.polylines.featureSet.features);try{for(f.s();!(y=f.n()).done;){var d=y.value;(0,v.Yg)(r,d.geometry),(0,c.TC)(n,r)}}catch(C){f.e(C)}finally{f.f()}}if(o.points&&o.points.featureSet&&o.points.featureSet.features){var h,b=(0,l.Z)(o.points.featureSet.features);try{for(b.s();!(h=b.n()).done;){var m=h.value;(0,v.Yg)(r,m.geometry),(0,c.TC)(n,r)}}catch(C){b.e(C)}finally{b.f()}}if(o.mapImages){var g,S=(0,l.Z)(o.mapImages);try{for(S.s();!(g=S.n()).done;){var k=g.value;(0,v.Yg)(r,k.extent),(0,c.TC)(n,r)}}catch(C){S.e(C)}finally{S.f()}}}}catch(C){i.e(C)}finally{i.f()}return(0,c.fS)(n,c.Gv)?void 0:{xmin:n[0],ymin:n[1],zmin:n[2],xmax:n[3],ymax:n[4],zmax:n[5],spatialReference:p.Z.WGS84}}}}]);
//# sourceMappingURL=3838.faea1f04.chunk.js.map