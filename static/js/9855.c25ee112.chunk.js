"use strict";(self.webpackChunkmaptest=self.webpackChunkmaptest||[]).push([[9855],{17653:function(e,t,r){r.d(t,{Z:function(){return _}});var n=r(1413),a=r(74165),i=r(15861),o=r(15671),u=r(43144),c=r(76200),s=r(10064),l=r(66978),h=r(37762),f=r(52522),g=r(38499);function p(e,t){return d.apply(this,arguments)}function d(){return d=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,o,u,c,s,p,d,m,v,w,y,b,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=(0,f.p)(t))instanceof Error)){e.next=3;break}throw n;case 3:return e.next=5,n.createImages();case 5:(0,l.k_)(r),i=n.frames,o=n.width,u=n.height,(c=document.createElement("canvas")).width=o,c.height=u,s=c.getContext("2d",{willReadFrequently:!0}),p=[],d=[],m=(0,h.Z)(i);try{for(m.s();!(v=m.n()).done;)w=v.value,d.push((0,g.HA)(w.delay||100)),y=w.imageElement,0===w.blendOp?s.globalCompositeOperation="copy":s.globalCompositeOperation="source-over",b=2===w.disposeOp?s.getImageData(w.left,w.top,w.width,w.height):void 0,s.drawImage(y,w.left,w.top),C=s.getImageData(0,0,o,u),p.push(C),0===w.disposeOp||(1===w.disposeOp?s.clearRect(w.left,w.top,w.width,w.height):2===w.disposeOp&&s.putImageData(b,w.left,w.top))}catch(a){m.e(a)}finally{m.f()}return e.abrupt("return",{frameDurations:d,getFrame:function(e){return p[e]},width:o,height:u});case 12:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}var m=[137,80,78,71,13,10,26,10];function v(e){var t=new Uint8Array(e);return!m.some((function(e,r){return e!==t[r]}))}function w(e){if(!v(e))return!1;var t,r=new DataView(e),n=new Uint8Array(e),a=8;do{var i=r.getUint32(a);if("acTL"===(t=String.fromCharCode.apply(String,Array.prototype.slice.call(n.subarray(a+4,a+8)))))return!0;a+=12+i}while("IEND"!==t&&a<n.length);return!1}var y=r(91958),b=r(47191);function C(e,t){return x.apply(this,arguments)}function x(){return x=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,o,u,c,s,l,f,p,d,m,v,w,C,x,k;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,b.p)(t),i=(0,b.d)(n,!0),o=n.lsd,u=o.width,c=o.height,(s=document.createElement("canvas")).width=u,s.height=c,l=s.getContext("2d",{willReadFrequently:!0}),f=[],p=[],d=(0,h.Z)(i);try{for(d.s();!(m=d.n()).done;)v=m.value,p.push((0,g.HA)(v.delay||100)),w=new ImageData(v.patch,v.dims.width,v.dims.height),C=(0,y.E0)(w),x=3===v.disposalType?l.getImageData(v.dims.left,v.dims.top,v.dims.width,v.dims.height):void 0,l.drawImage(C,v.dims.left,v.dims.top),k=l.getImageData(0,0,u,c),f.push(k),1===v.disposalType||(2===v.disposalType?l.clearRect(v.dims.left,v.dims.top,v.dims.width,v.dims.height):3===v.disposalType&&l.putImageData(x,v.dims.left,v.dims.top))}catch(r){d.e(r)}finally{d.f()}return e.abrupt("return",{frameDurations:p,getFrame:function(e){return f[e]},width:u,height:c});case 6:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}var k=[71,73,70];function M(e){if(!function(e){var t=new Uint8Array(e);return!k.some((function(e,r){return e!==t[r]}))}(e))return!1;for(var t=new DataView(e),r=t.getUint8(10),n=13+(128&r?3*Math.pow(2,1+(7&r)):0),a=0,i=!1;!i;){switch(t.getUint8(n++)){case 33:if(!o())return!1;break;case 44:u();break;case 59:i=!0;break;default:return!1}if(a>1)return!0}function o(){switch(t.getUint8(n++)){case 249:n++,n+=4,c();break;case 1:a++,n++,n+=12,c();break;case 254:c();break;case 255:n++,n+=8,n+=3,c();break;default:return!1}return!0}function u(){a++,n+=8;var e=t.getUint8(n++);n+=128&e?3*Math.pow(2,1+(7&e)):0,n++,c()}function c(){for(var e;e=t.getUint8(n++);)n+=e}return!1}var _=function(){function e(){(0,o.Z)(this,e),this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}return(0,u.Z)(e,[{key:"destroy",value:function(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}},{key:"getResource",value:function(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}},{key:"fetchResource",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._resourceMap.get(t))){e.next=3;break}return e.abrupt("return",{width:n.width,height:n.height});case 3:return i=this._inFlightResourceMap.get(t),e.abrupt("return",i?i.then((function(e){return{width:e.width,height:e.height}})):(i=I(t,r),this._inFlightResourceMap.set(t,i),i.then((function(e){return o._inFlightResourceMap.delete(t),o._resourceMap.set(t,e),{width:e.width,height:e.height}}),(function(){return{width:0,height:0}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteResource",value:function(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}}]),e}();function R(e,t){return P.apply(this,arguments)}function P(){return P=(0,i.Z)((0,a.Z)().mark((function e(t,r){var i,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.URL.createObjectURL(t),e.prev=1,e.next=4,(0,c.default)(i,(0,n.Z)((0,n.Z)({},r),{},{responseType:"image"}));case 4:return o=e.sent,u=o.data,e.abrupt("return",u);case 9:if(e.prev=9,e.t0=e.catch(1),(0,l.D_)(e.t0)){e.next=13;break}throw new s.Z("mapview-invalid-resource","Could not fetch requested resource at ".concat(i));case 13:throw e.t0;case 14:return e.prev=14,window.URL.revokeObjectURL(i),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,9,14,17]])}))),P.apply(this,arguments)}function I(e,t){return S.apply(this,arguments)}function S(){return S=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,r);case 2:if(n=e.sent,i=n.arrayBuffer,o=n.mediaType,u="image/png"===o,"image/gif"!==o||!M(i)){e.next=8;break}return e.abrupt("return",C(i));case 8:if(!u||!w(i)){e.next=10;break}return e.abrupt("return",p(i,r));case 10:return e.abrupt("return",R(new Blob([i],{type:o}),r));case 11:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function z(e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,i.Z)((0,a.Z)().mark((function e(t,r){var i,o,u,h,f,g,p,d,m,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=";base64,",!t.includes(o)){e.next=7;break}for(u=t.indexOf(o),h=t.indexOf(o)+8,f=t.substring(h),g=atob(f),p=new Uint8Array(g.length),d=0;d<g.length;d++)p[d]=g.charCodeAt(d);i={arrayBuffer:p.buffer,mediaType:t.substring(0,u).replace("data:","")},e.next=19;break;case 7:return e.prev=7,e.next=10,(0,c.default)(t,(0,n.Z)({responseType:"array-buffer"},r));case 10:m=e.sent,v=m.data,i={arrayBuffer:v,mediaType:m.getHeader("Content-Type")},e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(7),(0,l.D_)(e.t0)){e.next=19;break}throw new s.Z("mapview-invalid-resource","Could not fetch requested resource at ".concat(t));case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,null,[[7,15]])}))),Z.apply(this,arguments)}},60975:function(e,t,r){r.r(t),r.d(t,{previewCIMSymbol:function(){return L}});var n,a,i=r(74165),o=r(15861),u=r(17842),c=r(78915),s=r(37762),l=r(15671),h=r(43144),f=r(51995),g=r(76200),p=r(92026),d=r(66978),m=r(98991),v=r(17653),w=r(66726),y=r(16285),b=r(22532),C=r(31027),x=r(49729),k=r(83748);(a=n||(n={})).Legend="legend",a.Preview="preview";var M=function(e){return e&&e.scaleFactor?e.scaleFactor:1},_=function(){function e(t,r){(0,l.Z)(this,e),this._spatialReference=t,this._avoidSDF=r,this._resourceCache=new Map,this._imageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new b.Z,this._cimResourceManager=new v.Z,this._rasterizer=new y.Z(this._cimResourceManager)}return(0,h.Z)(e,[{key:"resourceManager",get:function(){return this._cimResourceManager}},{key:"rasterizeCIMSymbolAsync",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,n,a,o,u,s,l){var h,f,g,p,d,m,v,y,b,x,k,M,_,P,I,S,z,Z,D,F,A,L,T,B,U,O;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if((h=t.data)&&"CIMSymbolReference"===h.type&&h.symbol){e.next=5;break}return e.abrupt("return",null);case 5:return f=h.symbol,u||(u=(0,C.JW)(f)),e.next=9,c.E0.resolveSymbolOverrides(h,r,this._spatialReference,o,u,s,l);case 9:if(g=e.sent,this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),p=this._imageDataCanvas,d=this._cimResourceManager,m=[],c.B$.fetchResources(g,d,m),e.t0=m.length>0,!e.t0){e.next=17;break}return e.next=17,Promise.all(m);case 17:if(v=n.width,y=n.height,b=R(u,v,y,a),x=c.B$.getEnvelope(g,b,d)){e.next=20;break}return e.abrupt("return",null);case 20:k=1.3333333333333333*(window.devicePixelRatio||1),M=1,_=0,P=0,e.t1=f.type,e.next="CIMPointSymbol"===e.t1||"CIMTextSymbol"===e.t1?25:"CIMLineSymbol"===e.t1?30:"CIMPolygonSymbol"===e.t1?36:39;break;case 25:return I=1,x.width>v&&(I=v/x.width),S=1,x.height>y&&(S=y/x.height),"preview"===a&&(x.width<v&&(I=v/x.width),x.height<y&&(S=y/x.height)),M=Math.min(I,S),_=x.x+x.width/2,P=x.y+x.height/2,e.abrupt("break",39);case 30:return z=1,x.height>y&&(z=y/x.height),M=z,P=x.y+x.height/2,Z=x.x*M+v/2,D=(x.x+x.width)*M+v/2,Z<0&&(b.paths[0][0][0]-=Z),D>v&&(b.paths[0][2][0]-=D-v),e.abrupt("break",39);case 36:_=x.x+x.width/2,P=x.y+x.height/2,F=x.x*M+v/2,A=(x.x+x.width)*M+v/2,L=x.y*M+y/2,T=(x.y+x.height)*M+y/2,B=b.rings,F<0&&(B[0][0][0]-=F,B[0][3][0]-=F,B[0][4][0]-=F),L<0&&(B[0][0][1]+=L,B[0][1][1]+=L,B[0][4][1]+=L),A>v&&(B[0][1][0]-=A-v,B[0][2][0]-=A-v),T>y&&(B[0][2][1]+=T-y,B[0][3][1]+=T-y);case 39:return p.width=v*k,p.height=y*k,1,p.width+=2,p.height+=2,U=p.getContext("2d"),(O=w.zA.createIdentity()).translate(-_,-P),O.scale(M*k,-M*k),O.translate(v*k/2+1,y*k/2+1),U.clearRect(0,0,p.width,p.height),e.abrupt("return",(new w.cD(U,d,O,!0).drawSymbol(g,b),U.getImageData(0,0,p.width,p.height)));case 45:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i,o,u,c){return e.apply(this,arguments)}}()},{key:"analyzeCIMSymbol",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,n,a,o){var u,c,s,l,h,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],c=r?{geometryType:a,spatialReference:this._spatialReference,fields:r}:null,e.next=3,(0,m.c)(t.data,c,this._cimResourceManager,u,this._avoidSDF);case 3:for((0,d.k_)(o),l=0,h=u;l<h.length;l++)"CIMPictureMarker"!==(f=h[l]).cim.type&&"CIMPictureFill"!==f.cim.type&&"CIMPictureStroke"!==f.cim.type||(s||(s=[]),s.push(this._fetchPictureMarkerResource(f,o))),n&&"text"===f.type&&"string"==typeof f.text&&f.text.includes("[")&&(f.text=(0,C.Qs)(n,f.text,f.cim.textCase));if(e.t0=s,!e.t0){e.next=9;break}return e.next=9,Promise.all(s);case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}()},{key:"rasterizeCIMSymbol3D",value:function(e,t,r,n,a,i){var o,u=[],c=(0,s.Z)(e);try{for(c.s();!(o=c.n()).done;){var l=o.value;n&&"function"==typeof n.scaleFactor&&(n.scaleFactor=n.scaleFactor(t,a,i));var h=this._getRasterizedResource(l,t,r,n,a,i);if(h){var f=0,g=h.anchorX||0,p=h.anchorY||0,d=!1,m=0,v=0;if("esriGeometryPoint"===r){var w=M(n);if(m=(0,C.hf)(l.offsetX,t,a,i)*w||0,v=(0,C.hf)(l.offsetY,t,a,i)*w||0,"marker"===l.type)f=(0,C.hf)(l.rotation,t,a,i)||0,d=!!l.rotateClockwise&&l.rotateClockwise;else if("text"===l.type){if(f=(0,C.hf)(l.angle,t,a,i)||0,void 0!==l.horizontalAlignment)switch(l.horizontalAlignment){case"left":g=-.5;break;case"right":g=.5;break;default:g=0}if(void 0!==l.verticalAlignment)switch(l.verticalAlignment){case"top":p=.5;break;case"bottom":p=-.5;break;case"baseline":p=-.25;break;default:p=0}}}null!=h&&u.push({angle:f,rotateClockWise:d,anchorX:g,anchorY:p,offsetX:m,offsetY:v,rasterizedResource:h})}}}catch(y){c.e(y)}finally{c.f()}return this.getSymbolImage(u)}},{key:"getSymbolImage",value:function(e){for(var t=document.createElement("canvas"),r=(0,p.s3)(t.getContext("2d")),n=0,a=0,i=0,o=0,c=[],s=0;s<e.length;s++){var l=e[s],h=l.rasterizedResource;if(h){var f=h.size,g=l.offsetX,d=l.offsetY,m=l.anchorX,v=l.anchorY,w=l.rotateClockWise||!1,y=l.angle,b=(0,u.F2)(g)-f[0]*(.5+m),C=(0,u.F2)(d)-f[1]*(.5+v),x=b+f[0],M=C+f[1];if(y){w&&(y=-y);var _=Math.sin(y*Math.PI/180),R=Math.cos(y*Math.PI/180),P=b*R-C*_,I=b*_+C*R,S=b*R-M*_,z=b*_+M*R,Z=x*R-M*_,D=x*_+M*R,F=x*R-C*_,A=x*_+C*R;b=Math.min(P,S,Z,F),C=Math.min(I,z,D,A),x=Math.max(P,S,Z,F),M=Math.max(I,z,D,A)}n=b<n?b:n,a=C<a?C:a,i=x>i?x:i,o=M>o?M:o;var L=r.createImageData(h.size[0],h.size[1]);L.data.set(new Uint8ClampedArray(h.image.buffer));var T={offsetX:g,offsetY:d,rotateClockwise:w,angle:y,rasterizedImage:L,anchorX:m,anchorY:v};c.push(T)}}t.width=i-n,t.height=o-a;for(var B=-n,U=o,O=0;O<c.length;O++){var E=c[O],X=this._imageDataToCanvas(E.rasterizedImage),H=E.rasterizedImage.width,Y=E.rasterizedImage.height,W=B-H*(.5+E.anchorX),J=U-Y*(.5-E.anchorY);if(E.angle){var j=(360-E.angle)*Math.PI/180;r.save(),r.translate((0,u.F2)(E.offsetX),-(0,u.F2)(E.offsetY)),r.translate(B,U),r.rotate(j),r.translate(-B,-U),r.drawImage(X,W,J),r.restore()}else r.drawImage(X,W+(0,u.F2)(E.offsetX),J-(0,u.F2)(E.offsetY))}var G=new k.e({x:B/t.width-.5,y:U/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:G}}},{key:"_fetchPictureMarkerResource",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.materialHash,this._pictureMarkerCache.get(n)){e.next=6;break}return e.next=4,(0,g.default)(t.cim.url,{responseType:"image",signal:r&&r.signal});case 4:a=e.sent.data,this._pictureMarkerCache.set(n,a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_imageDataToCanvas",value:function(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var t=this._imageDataCanvas,r=(0,p.s3)(t.getContext("2d"));return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}},{key:"_imageTo32Array",value:function(e,t,r,n){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));var a=this._imageDataCanvas,i=(0,p.s3)(a.getContext("2d"));if(a.width=t,a.height=r,i.drawImage(e,0,0,t,r),n){i.save();var o=new f.Z(n);i.fillStyle=o.toHex(),i.globalCompositeOperation="multiply",i.fillRect(0,0,t,r),i.globalCompositeOperation="destination-atop",i.drawImage(e,0,0,t,r),i.restore()}return new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}},{key:"_getRasterizedResource",value:function(e,t,r,n,a,i){var o,u,c;if("text"===e.type)return this._rasterizeTextResource(e,t,n,a,i);var s=function(e,t,r,n){var a,i;"function"==typeof e.materialHash?(a=(0,e.materialHash)(t,r,n),i=(0,m.S)(e.cim,e.materialOverrides)):(a=e.materialHash,i=e.cim);return{analyzedCIM:i,hash:a}}(e,t,a,i);o=s.analyzedCIM,u=s.hash;var l=M(n);if("CIMPictureMarker"===e.cim.type){var h=(0,C.hf)(e.size,t,a,i)*l,f=(0,p.s3)(this._getPictureResource(e,h,(0,C.hf)(e.color,t,a,i)));return c={image:f.image,size:[f.width,f.height],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0}}(0,x.FW)(o,l,{preserveOutlineWidth:!1});var g=o;u+=r,n&&(u+=JSON.stringify(n));var d=this._resourceCache;return d.has(u)?d.get(u):(c=this._rasterizer.rasterizeJSONResource({cim:g,type:e.type,url:e.url,mosaicHash:u,size:null,path:null},window.devicePixelRatio||1,this._avoidSDF),d.set(u,c),c)}},{key:"_rasterizeTextResource",value:function(e,t,r,n,a){var i=M(r),o=(0,C.hf)(e.text,t,n,a);if(!o||0===o.length)return null;var u=(0,C.hf)(e.fontName,t,n,a),c=(0,C.hf)(e.style,t,n,a),s=(0,C.hf)(e.weight,t,n,a),l=(0,C.hf)(e.decoration,t,n,a),h=(0,C.hf)(e.size,t,n,a)*i,f=(0,C.hf)(e.horizontalAlignment,t,n,a),g=(0,C.hf)(e.verticalAlignment,t,n,a),p=(0,C.nn)((0,C.hf)(e.color,t,n,a)),d=(0,C.nn)((0,C.hf)(e.outlineColor,t,n,a)),m={color:p,size:h,horizontalAlignment:f,verticalAlignment:g,font:{family:u,style:c,weight:s,decoration:l},halo:{size:(0,C.hf)(e.outlineSize,t,n,a)||0,color:d,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,m)}},{key:"_getPictureResource",value:function(e,t,r){var n=this._pictureMarkerCache.get(e.materialHash);if(!n)return null;var a=n.height/n.width,i=t?a>1?(0,u.F2)(t):(0,u.F2)(t)/a:n.width,o=t?a>1?(0,u.F2)(t)*a:(0,u.F2)(t):n.height;return{image:this._imageTo32Array(n,i,o,r),width:i,height:o}}}]),e}();function R(e,t,r,n){var a=-t/2+1,i=t/2-1,o=r/2-1,u=-r/2+1;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[a,0],[0,0],[i,0]]]};default:return"legend"===n?{rings:[[[a,o],[i,0],[i,u],[a,u],[a,o]]]}:{rings:[[[a,o],[i,o],[i,u],[a,u],[a,o]]]}}}var P=r(37817),I=r(69157),S=new _(null,!0),z=(0,u.Wz)(P.b_.size),Z=(0,u.Wz)(P.b_.maxSize),D=(0,u.Wz)(P.b_.lineWidth),F=1;function A(e){var t=null===e||void 0===e?void 0:e.size;return"number"==typeof t?{width:t,height:t}:{width:null!=t&&"object"==typeof t&&"width"in t?t.width:null,height:null!=t&&"object"==typeof t&&"height"in t?t.height:null}}function L(e){return T.apply(this,arguments)}function T(){return T=(0,o.Z)((0,i.Z)().mark((function e(t){var r,a,o,s,l,h,f,g,p,d,m,v,w,y,b,x,k,M,_,R,P,L,T,B,U,O,E=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(o=E.length>1&&void 0!==E[1]?E[1]:{}).node,l=o.opacity,h=o.symbolConfig,f="object"==typeof h&&"isSquareFill"in h&&h.isSquareFill,g=o.cimOptions||o,p=g.geometryType||(0,C.JW)(null===(r=t)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.symbol),d=A(o),m=g.feature,v=g.fieldMap,null!=d.width&&null!=d.height){e.next=17;break}return e.next=5,c.E0.resolveSymbolOverrides(t.data,m,null,v,p);case 5:if(w=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:if((t=t.clone()).data={type:"CIMSymbolReference",symbol:w},t.data.primitiveOverrides=void 0,y=[],c.B$.fetchResources(w,S.resourceManager,y),e.t0=y.length>0,!e.t0){e.next=15;break}return e.next=15,Promise.all(y);case 15:b=c.B$.getEnvelope(w,null,S.resourceManager),x=null===b||void 0===b?void 0:b.width,k=null===b||void 0===b?void 0:b.height,d.width="esriGeometryPolygon"===p?z:"esriGeometryPolyline"===p?D:null!=x&&isFinite(x)?Math.min(x,Z):z,d.height="esriGeometryPolygon"===p?z:null!=k&&isFinite(k)?Math.max(Math.min(k,Z),F):z;case 17:return e.next=19,S.rasterizeCIMSymbolAsync(t,m,d,f||"esriGeometryPolygon"!==p?n.Preview:n.Legend,v,p);case 19:if(M=e.sent){e.next=22;break}return e.abrupt("return",null);case 22:return _=M.width,R=M.height,(P=document.createElement("canvas")).width=_,P.height=R,P.getContext("2d").putImageData(M,0,0),L=(0,u.F2)(d.width),T=(0,u.F2)(d.height),(B=new Image(L,T)).src=P.toDataURL(),null!=l&&(B.style.opacity="".concat(l)),U=B,null!=o.effectView&&(O={shape:{type:"image",x:0,y:0,width:L,height:T,src:B.src},fill:null,stroke:null,offset:[0,0]},U=(0,I.wh)([[O]],[L,T],{effectView:o.effectView})),e.abrupt("return",(s&&U&&s.appendChild(U),U));case 30:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}},38999:function(e,t,r){var n,a;function i(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function o(e){switch(e){case"top":return a.Top;case"middle":return a.Center;case"baseline":return a.Baseline;case"bottom":return a.Bottom}}function u(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[n.Right,a.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[n.Center,a.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[n.Left,a.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[n.Right,a.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[n.Center,a.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[n.Left,a.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[n.Right,a.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[n.Center,a.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[n.Left,a.Top];default:return console.debug("Found invalid placement type ".concat(e)),[n.Center,a.Center]}}function c(e){switch(e){case n.Right:return-1;case n.Center:return 0;case n.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(e)),0}}function s(e){switch(e){case a.Top:return 1;case a.Center:return 0;case a.Bottom:case a.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(e)),0}}function l(e){switch(e){case"left":return n.Left;case"right":return n.Right;case"center":return n.Center}}function h(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}r.d(t,{Hd:function(){return l},M7:function(){return n},NS:function(){return h},TR:function(){return a},b7:function(){return o},g:function(){return c},kH:function(){return i},qv:function(){return u},tf:function(){return s}}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(n||(n={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(a||(a={}))},94109:function(e,t,r){r.d(t,{$0:function(){return o},AI:function(){return n},Al:function(){return g},By:function(){return y},C1:function(){return W},CQ:function(){return j},CU:function(){return U},D3:function(){return f},Ex:function(){return s},I_:function(){return i},Ic:function(){return p},Ij:function(){return v},Ip:function(){return H},Iv:function(){return N},Iw:function(){return l},Jw:function(){return k},MI:function(){return Y},QU:function(){return x},SD:function(){return Q},Tz:function(){return G},Uh:function(){return J},V4:function(){return B},XD:function(){return ne},XJ:function(){return X},Xj:function(){return C},Zd:function(){return F},_5:function(){return R},_6:function(){return $},a:function(){return O},aK:function(){return S},dn:function(){return T},e0:function(){return q},eF:function(){return h},eV:function(){return u},f2:function(){return w},fL:function(){return E},iJ:function(){return d},iV:function(){return A},jk:function(){return K},kF:function(){return M},lK:function(){return z},m4:function(){return Z},mx:function(){return b},nM:function(){return m},nb:function(){return re},oK:function(){return V},pU:function(){return I},ru:function(){return a},tQ:function(){return L},u4:function(){return te},uG:function(){return D},vw:function(){return ee},xl:function(){return P},xm:function(){return c},yP:function(){return _}});var n=1e-30,a=4294967295,i=512,o=8,u=10,c=29,s=24,l=8,h={metrics:{width:15,height:17,left:0,top:-7,advance:14}},f=0,g=0,p=0,d=1,m=2,v=3,w=4,y=5,b=6,C=12,x=5,k=6,M=5,_=6,R=0,P=1,I=2,S=3,z=4,Z=2,D=1,F=2,A=4,L=1.05,T=3,B=5,U=6,O=1.15,E=2,X=8,H=500,Y=10,W=1024,J=2,j=0,G=1,V=4,q=8,N=16,$=4,Q=1,K=4,ee=8,te=128,re=4,ne=2},73271:function(e,t,r){r.d(t,{Au:function(){return a},Jz:function(){return o},UJ:function(){return i}});var n=new Float32Array(1);new Uint32Array(n.buffer);function a(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function i(e,t){return 65535&e|t<<16}function o(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24}}}]);
//# sourceMappingURL=9855.c25ee112.chunk.js.map